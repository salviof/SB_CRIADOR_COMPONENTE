<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:decorate template="#{layout.xhtmlJsfCaminhoRelativo}">


        <ui:define name="input">
            #{pgMapaComponentes.campoInstanciado.somenteLeitura}

            <p:inputText  style=" visibility: hidden;"/>

            <h:panelGroup  >

                <h:panelGroup  rendered="#{registro.vazio}"  >

                    <p:commandButton value="Enviar #{label}"
                                     actionListener="#{pgUtil.exibirModalEnvioArquivo()}"
                                     partialSubmit="true"
                                     process="@this"
                                     >
                        <p:ajax event="dialogReturn"  update="@parent:@parent"/>

                        <f:setPropertyActionListener target="#{paginaAtual.infoPagina.modalDados.campoSelecionado}"
                                                     value="#{registro}" />
                    </p:commandButton>

                </h:panelGroup>


                <h:panelGroup rendered="#{!registro.vazio}" >
                    <h:panelGroup rendered="#{registro.umCampoArquivoEntidade}" >
                        #{registro.valor}
                    </h:panelGroup>
                    <br/>

                    <table style="width:100%">

                        <h:column rendered="#{registro.comoArquivoDeEntidade.usuarioLogadoTemPermissaoBaixarArquivo}" >

                            <p:commandButton value="Baixar"
                                             onclick="javaScript:window.open('#{registro.comoArquivoDeEntidade.linkBaixarArquivo}', '_blank');"
                                             icon="#{iconeIconeFontAwesome.REG_BAIXAR.tagHtml}"
                                             />
                            <p:commandButton value="Abrir"
                                             onclick="javaScript:window.open('#{registro.comoArquivoDeEntidade.linkAbrirArquivo}', '_blank');"
                                             icon="#{iconeIconeFontAwesome.REG_VISUALIZAR.tagHtml}"
                                             />
                        </h:column>


                        <h:column rendered="#{registro.comoArquivoDeEntidade.usuarioLogadoTemAlterarArquivo}" >

                            <p:commandButton value="Atualizar"
                                             action="#{pgUtil.exibirModalEnvioArquivo()}"

                                             icon="#{iconeIconeFontAwesome.REG_ATUALIZAR.tagHtml}"
                                             >
                                <p:ajax event="dialogReturn"  update="@namingcontainer" />
                                <f:setPropertyActionListener target="#{paginaAtual.infoPagina.modalDados.campoSelecionado}"
                                                             value="#{registro}" />

                            </p:commandButton>

                        </h:column>


                        <h:column rendered="#{registro.comoArquivoDeEntidade.usuarioLogadoTemPermissaoBaixarArquivo}" >

                            <p:commandButton value="Excluir"
                                             icon="#{iconeIconeFontAwesome.REG_ANTERIOR.tagHtml}"
                                             />
                        </h:column>

                    </table>
                </h:panelGroup>
            </h:panelGroup>

        </ui:define>
    </ui:decorate>
</ui:composition>
