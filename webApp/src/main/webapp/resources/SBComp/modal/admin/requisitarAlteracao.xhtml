<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


    <h:head>
        <title>
            #{pgModalRequisito.paginaVinculada.acaoVinculada.nomeUnico}
        </title>

    </h:head>

    <h:body>

        <h:form>

            <div class="Container100" >

                <h:inputHidden   value="#{pgModalRequisito.nomeUnicoAcao}" />

                <div class="Container30">
                    <p:commandButton value="Conectar com requisito Jira"
                                     actionListener="#{pgModalRequisito.atualizarRequisito()}"
                                     update="@form"
                                     />
                    <p:link href="#{pgModalRequisito.ur}/browse/#{pgModalSBJSF.paginaVinculada.acaoVinculada.idDescritivoJira}"
                            value="#{pgModalSBJSF.paginaVinculada.acaoVinculada.idDescritivoJira}"
                            target="requisitoJira:"
                            >
                        Ver requisito, que originou a tarefa
                    </p:link>
                </div>
            </div>

            <p:fieldset legend="#{pgModalRequisito.requisitoVinculadoAcao.nome}"
                        id="detalhesRequisito"
                        rendered="#{pgModalRequisito.requisitoVinculadoAcao!=null}">
                <a href="#{pgModalRequisito.requisitoVinculadoAcao.urlRequisito}"
                   target="sbReqDoMomento"
                   >
                    Lnk para tarefa Vinculada:    #{pgModalRequisito.requisitoVinculadoAcao.urlRequisito}

                </a> <br/>



                <br/>
                <br/>


                <h:panelGrid columns="2" >
                    <p:inputText value="#{pgModalRequisito.comentario}" />
                    <p:commandButton value="Adicionar Comentário"
                                     actionListener="#{pgModalRequisito.adicionarComentario()}"
                                     update="@form"
                                     />
                </h:panelGrid>


                <p:textEditor



                    placeholder="A descrição desta atividade não foi cadastrada."
                    value="#{pgModalRequisito.requisitoVinculadoAcao.descricao}" readonly="true" >
                    <f:facet name="toolbar">
                    </f:facet>
                </p:textEditor>

                <br/>
                <p:fieldset legend="Comentários:" >
                    <c:forEach items="#{pgModalRequisito.requisitoVinculadoAcao.comentarios}" var="cm">
                        #{cm.nomeUsuario}->#{cm.comentario}  <br/>
                    </c:forEach>

                </p:fieldset>


            </p:fieldset>
        </h:form>


    </h:body>

</html>
