<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:sb="http://superbitsframework/ui"

      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:SBComp="http://xmlns.jcp.org/jsf/composite/resources/SBComp"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">


    <h:head>

        <script>
            function enviarArquivo(slugEntidade, idNomeArquivo) {
                //      document.getElementById["form:botoes"].style.display = 'none';
                PF('enviarArquivo').show();
            }
        </script>
        <title>Pesquisa Avan√ßada</title>
        <ui:include src="folhasDeEstiloModal.xhtml" />

    </h:head>

    <h:body>

        <c:if test="#{!pgUtilLayout.verificaExisteLayout(pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.comoCampoSeltorItem.grupoCampoExibicao.nomeIdentificadorSlug)}">
            #{pgUtilLayout.gerarLayout(pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.comoCampoSeltorItem.grupoCampoExibicao, pgUtilAcoes.listaAcaoSelecaoRegistro)}
        </c:if>

        <div class="Fright">
            <h:form rendered="false" >
                <p:commandButton icon="fa fa-close" actionListener="#{pgModalSBJSF.fecharModal()}" />
            </h:form>
        </div>

        <h:form>
            <p:inputText value="#{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.comoCampoSeltorItem.filtro}" style="font-size: 25px!important; width: 100%;"
                         placeholder="Pesquise por #{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.nomeDoObjetoPlural} cadastrados "
                         styleClass="CampoResponsivo"
                         rendered="false"
                         >
                <p:ajax event="blur" update="formularioItens" />

            </p:inputText>

            <p:focus />
        </h:form>

        <h:form id="formularioItens">
            <div class="Container100">

                <p:dataTable sortMode="multiple"
                             value="#{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.comoCampoSeltorItem.seletor.origem}"
                             var="item"
                             emptyMessage="Nenhum #{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.nomeDoObjeto} Encontrado"
                             paginator="true"
                             rows="10"
                             widgetVar="pesquisaAvancada"
                             >
                    <f:facet name="header" >

                        <div  class="container-fluid">
                            <div class="row" >
                                <div class="col-md-4 col-md-offset-4 " style="margin-top: 10px;margin-right: 0px " >
                                    #{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.label}
                                </div>
                                <div class="col-md-4 " style="margin-top: 5px; margin-bottom: 5px; " >


                                    <p:inputText
                                        id="globalFilter"
                                        onkeyup="PF('pesquisaAvancada').filter()"
                                        style="width:100%; height: 35px;"
                                        placeholder="Pesquise aqui:"/>



                                </div>
                            </div>
                        </div>
                    </f:facet>


                    <p:columns var="coluna" value="#{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.comoCampoSeltorItem.grupoCampoExibicao.campos}"
                               sortBy="#{item[coluna.primeiroCaminhoSemNomeClasse]}"
                               filterBy="#{item[coluna.primeiroCaminhoSemNomeClasse]}"
                               filterMatchMode="contains"
                               filterStyleClass="listaComOcoesOcultaFitro"
                               width="#{pgUtilLayout.getColunaLayoutByNomeCampoCompletoComGrupo(coluna.caminhoCompletoComGrupoCampo).porcentagemCalculada}%"

                               >


                        <f:facet name="header">

                            <h:outputText value= "#{coluna.label}"/>
                        </f:facet>
                        <center>
                            <sb:inputSB
                                registro="#{item.getCampoByNomeOuAnotacao(coluna.caminhoSemNomeClasse)}"
                                desabilitarEdicao="true"
                                layoutCampo="#{layoutsComponenteSB.layoutCampo.semLabel}"
                                possuiIDOnChange="false"
                                possuiMetodoOnChange="false"
                                label="#{item.getCampoByNomeOuAnotacao(coluna.caminhoSemNomeClasse).label}"
                                atualizarFormOnChange="false"
                                atualizarGrupoOnChange="false"
                                obrigatorio="false"
                                />
                        </center>
                    </p:columns>










                    <p:column headerText="" width="50">

                        <p:commandButton icon="fa fa-hand-pointer-o" actionListener="#{pgModalSBJSF.fecharModal()}" >
                            <f:setPropertyActionListener target="#{pgModalSBJSF.paginaVinculada.modalDados.campoSelecionado.valor}" value="#{item}" />

                        </p:commandButton>

                    </p:column>

                </p:dataTable>






            </div>


        </h:form>


    </h:body>

</html>
